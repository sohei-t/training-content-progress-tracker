<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Á†î‰øÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑÈÄ≤Êçó„Éà„É©„ÉÉ„Ç´„Éº - „É™„Ç¢„É´„Çø„Ç§„É†„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ">
    <title>Á†î‰øÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑÈÄ≤Êçó„Éà„É©„ÉÉ„Ç´„Éº</title>

    <!-- „Éó„É™„É≠„Éº„Éâ: „ÇØ„É™„ÉÜ„Ç£„Ç´„É´„É™„ÇΩ„Éº„Çπ -->
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                    },
                    gridTemplateColumns: {
                        '16': 'repeat(16, minmax(0, 1fr))',
                    }
                }
            }
        }
    </script>

    <!-- „ÇØ„É™„ÉÜ„Ç£„Ç´„É´CSS „Ç§„É≥„É©„Ç§„É≥ -->
    <style>
        /* ÂàùÊúüË°®Á§∫Áî®„ÇØ„É™„ÉÜ„Ç£„Ç´„É´CSS */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3B82F6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            transition: width 0.3s ease-out;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* „Ç´„Çπ„Çø„É†„Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }

        /* ‰ªÆÊÉ≥„Çπ„ÇØ„É≠„Éº„É´Áî® */
        .virtual-scroll-container {
            overflow-y: auto;
            will-change: transform;
        }

        .virtual-scroll-item {
            contain: layout style;
        }

        /* ÂÆå‰∫Ü„Çπ„Çø„É≥„Éó„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .complete-stamp {
            animation: stampIn 0.5s ease-out;
        }

        @keyframes stampIn {
            0% { transform: scale(0) rotate(-45deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(0deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        /* „É™„Çπ„ÉàË°®Á§∫ÊôÇ„ÅÆ„Éõ„Éê„ÉºÂäπÊûú */
        .list-item-hover:hover {
            background: linear-gradient(90deg, #f0f9ff 0%, #ffffff 100%);
        }
    </style>

    <!-- „Ç´„Çπ„Çø„É†CSS -->
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="app" v-cloak>
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="bg-white shadow-sm sticky top-0 z-50">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-6">
                        <h1 class="text-xl font-bold text-gray-800 cursor-pointer" @click="currentView = 'dashboard'">
                            üìä „Ç≥„É≥„ÉÜ„É≥„ÉÑÈÄ≤ÊçóÁÆ°ÁêÜ
                        </h1>
                        <!-- „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Çø„Éñ -->
                        <nav class="flex gap-2">
                            <button
                                @click="currentView = 'dashboard'"
                                :class="[
                                    'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                                    currentView === 'dashboard' || currentView === 'detail'
                                        ? 'bg-blue-100 text-blue-700'
                                        : 'text-gray-600 hover:bg-gray-100'
                                ]"
                            >
                                üìã „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
                            </button>
                            <button
                                @click="currentView = 'settings'"
                                :class="[
                                    'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                                    currentView === 'settings'
                                        ? 'bg-blue-100 text-blue-700'
                                        : 'text-gray-600 hover:bg-gray-100'
                                ]"
                            >
                                ‚öôÔ∏è Ë®≠ÂÆö
                            </button>
                        </nav>
                        <!-- Êé•Á∂öÁä∂ÊÖã„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
                        <div class="flex items-center gap-2">
                            <span
                                :class="[
                                    'w-2 h-2 rounded-full',
                                    wsConnected ? 'bg-green-500' : 'bg-red-500'
                                ]"
                                :title="wsConnected ? 'Êé•Á∂ö‰∏≠' : 'ÂàáÊñ≠'"
                            ></span>
                            <span class="text-xs text-gray-500">
                                {{ wsConnected ? 'Live' : 'Offline' }}
                            </span>
                        </div>
                    </div>

                    <div class="flex items-center gap-4">
                        <!-- ÊúÄÁµÇÊõ¥Êñ∞ -->
                        <span class="text-sm text-gray-500" v-if="lastUpdated">
                            Êõ¥Êñ∞: {{ formatTime(lastUpdated) }}
                        </span>
                        <!-- „Çπ„Ç≠„É£„É≥„Éú„Çø„É≥ -->
                        <button
                            @click="triggerScan"
                            :disabled="isScanning"
                            class="flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg transition-colors"
                        >
                            <span v-if="isScanning" class="loading-spinner w-4 h-4 border-2"></span>
                            <span v-else>üîÑ</span>
                            {{ isScanning ? '„Çπ„Ç≠„É£„É≥‰∏≠...' : 'Êõ¥Êñ∞' }}
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="container mx-auto px-4 py-8">
            <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫ -->
            <div v-if="isLoading" class="flex justify-center items-center py-20">
                <div class="text-center">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-500">Ë™≠„ÅøËæº„Åø‰∏≠...</p>
                </div>
            </div>

            <!-- „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ -->
            <div v-else-if="currentView === 'dashboard'" class="fade-in">
                <!-- „Çµ„Éû„É™„Éº„Ç´„Éº„Éâ -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-gray-500 text-sm mb-2">ÂÖ®„Éó„É≠„Ç∏„Çß„ÇØ„Éà</h3>
                        <p class="text-3xl font-bold text-gray-800">{{ stats.totalProjects }}</p>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-gray-500 text-sm mb-2">ÂÖ®‰ΩìÈÄ≤Êçó</h3>
                        <p class="text-3xl font-bold text-blue-600">{{ stats.overallProgress.toFixed(1) }}%</p>
                        <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div
                                class="h-full bg-blue-500 progress-bar"
                                :style="{ width: stats.overallProgress + '%' }"
                            ></div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-gray-500 text-sm mb-2">ÂÆå‰∫Ü„Éà„Éî„ÉÉ„ÇØ</h3>
                        <p class="text-3xl font-bold text-green-600">
                            {{ stats.completedTopics }}
                            <span class="text-lg text-gray-400">/ {{ stats.totalTopics }}</span>
                        </p>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-gray-500 text-sm mb-2">ÊàêÊûúÁâ©Êï∞</h3>
                        <div class="flex gap-4">
                            <div class="text-center">
                                <p class="text-lg font-bold text-green-600">{{ stats.htmlTotal }}</p>
                                <p class="text-xs text-gray-500">HTML</p>
                            </div>
                            <div class="text-center">
                                <p class="text-lg font-bold text-blue-600">{{ stats.txtTotal }}</p>
                                <p class="text-xs text-gray-500">TXT</p>
                            </div>
                            <div class="text-center">
                                <p class="text-lg font-bold text-orange-500">{{ stats.mp3Total }}</p>
                                <p class="text-xs text-gray-500">MP3</p>
                            </div>
                        </div>
                        <div v-if="stats.mp3TotalDuration > 0" class="mt-3 pt-3 border-t text-center">
                            <p class="text-lg font-bold text-orange-500">{{ formatDuration(stats.mp3TotalDuration) }}</p>
                            <p class="text-xs text-gray-500">MP3 ÂêàË®àÂÜçÁîüÊôÇÈñì</p>
                        </div>
                    </div>
                </div>

                <!-- „Éï„Ç£„É´„Çø„ÉºÔºÜË°®Á§∫Âàá„ÇäÊõø„Åà -->
                <div class="bg-white rounded-lg shadow p-4 mb-6 space-y-3">
                    <!-- 1Ë°åÁõÆ: ÈÄ≤Êçó„Éï„Ç£„É´„Çø„Éº + „ÇΩ„Éº„Éà + Ë°®Á§∫ÂàáÊõø -->
                    <div class="flex flex-wrap gap-4 items-center justify-between">
                        <div class="flex flex-wrap gap-2">
                            <button
                                @click="projectFilter = 'all'"
                                :class="[
                                    'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                                    projectFilter === 'all'
                                        ? 'bg-blue-500 text-white'
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                ]"
                            >
                                ÂÖ®„Å¶ ({{ projects.length }})
                            </button>
                            <button
                                @click="projectFilter = 'completed'"
                                :class="[
                                    'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                                    projectFilter === 'completed'
                                        ? 'bg-green-500 text-white'
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                ]"
                            >
                                ‚úÖ ÂÆå‰∫Ü ({{ completedProjects.length }})
                            </button>
                            <button
                                @click="projectFilter = 'incomplete'"
                                :class="[
                                    'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                                    projectFilter === 'incomplete'
                                        ? 'bg-yellow-500 text-white'
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                ]"
                            >
                                üîÑ Êú™ÂÆå‰∫Ü ({{ incompleteProjects.length }})
                            </button>
                            <button
                                @click="projectFilter = 'custom'"
                                :class="[
                                    'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                                    projectFilter === 'custom'
                                        ? 'bg-purple-500 text-white'
                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                ]"
                            >
                                üìä ÁØÑÂõ≤ÊåáÂÆö
                            </button>
                        </div>

                        <div class="flex gap-2 items-center">
                            <select v-model="sortBy" class="px-3 py-2 border rounded-lg text-sm">
                                <option value="name">ÂêçÂâçÈ†Ü</option>
                                <option value="progress">ÈÄ≤ÊçóÈ†Ü</option>
                                <option value="progress_asc">ÈÄ≤ÊçóÈ†ÜÔºà‰Ωé„ÅÑÈ†ÜÔºâ</option>
                                <option value="updated">Êõ¥Êñ∞È†Ü</option>
                            </select>
                            <div class="flex border rounded-lg overflow-hidden">
                                <button
                                    @click="viewMode = 'card'"
                                    :class="[
                                        'px-3 py-2 text-sm',
                                        viewMode === 'card'
                                            ? 'bg-blue-500 text-white'
                                            : 'bg-white text-gray-600 hover:bg-gray-100'
                                    ]"
                                    title="„Ç´„Éº„ÉâË°®Á§∫"
                                >
                                    ‚ñ¶
                                </button>
                                <button
                                    @click="viewMode = 'list'"
                                    :class="[
                                        'px-3 py-2 text-sm',
                                        viewMode === 'list'
                                            ? 'bg-blue-500 text-white'
                                            : 'bg-white text-gray-600 hover:bg-gray-100'
                                    ]"
                                    title="„É™„Çπ„ÉàË°®Á§∫"
                                >
                                    ‚â°
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 2Ë°åÁõÆ: Â±ûÊÄß„Éï„Ç£„É´„Çø„Éº -->
                    <div class="flex flex-wrap gap-2 items-center pt-2 border-t">
                        <span class="text-xs text-gray-400 mr-1">Áµû„ÇäËæº„Åø:</span>
                        <select v-model="destinationFilter" class="px-2 py-1.5 border rounded-lg text-xs">
                            <option value="all">üì¶ Á¥çÂìÅÂÖà: ÂÖ®„Å¶</option>
                            <option v-for="dest in destinations" :key="dest.id" :value="dest.id">
                                üì¶ {{ dest.name }}
                            </option>
                        </select>
                        <select v-model="ttsEngineFilter" class="px-2 py-1.5 border rounded-lg text-xs">
                            <option value="all">üîä Èü≥Â£∞: ÂÖ®„Å¶</option>
                            <option v-for="tts in ttsEngines" :key="tts.id" :value="tts.id">
                                üîä {{ tts.name }}
                            </option>
                        </select>
                        <select v-model="publicationStatusFilter" class="px-2 py-1.5 border rounded-lg text-xs">
                            <option value="all">üìã ÂÖ¨ÈñãÁä∂ÊÖã: ÂÖ®„Å¶</option>
                            <option value="unset">üìã Êú™Ë®≠ÂÆö</option>
                            <option v-for="status in publicationStatuses" :key="status.id" :value="status.id">
                                {{ status.name }}
                            </option>
                        </select>
                        <select v-model="checkStatusFilter" class="px-2 py-1.5 border rounded-lg text-xs">
                            <option value="all">‚úî „ÉÅ„Çß„ÉÉ„ÇØ: ÂÖ®„Å¶</option>
                            <option value="unset">‚úî Êú™Ë®≠ÂÆö</option>
                            <option v-for="cs in checkStatuses" :key="cs.id" :value="cs.id">
                                ‚úî {{ cs.name }}
                            </option>
                        </select>
                    </div>

                    <!-- „Ç´„Çπ„Çø„É†ÁØÑÂõ≤„Éï„Ç£„É´„Çø„Éº -->
                    <div v-if="projectFilter === 'custom'" class="p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center gap-4">
                            <span class="text-sm text-gray-600">ÈÄ≤ÊçóÁØÑÂõ≤:</span>
                            <input
                                type="number"
                                v-model.number="customRangeMin"
                                min="0"
                                max="100"
                                class="w-20 px-3 py-2 border rounded-lg text-sm"
                                placeholder="0"
                            >
                            <span class="text-gray-500">%</span>
                            <span class="text-gray-400">„Äú</span>
                            <input
                                type="number"
                                v-model.number="customRangeMax"
                                min="0"
                                max="100"
                                class="w-20 px-3 py-2 border rounded-lg text-sm"
                                placeholder="100"
                            >
                            <span class="text-gray-500">%</span>
                            <span class="text-sm text-gray-500 ml-4">
                                Ë©≤ÂΩì: {{ customFilteredProjects.length }} ‰ª∂
                            </span>
                        </div>
                    </div>
                </div>

                <!-- „Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß„Éò„ÉÉ„ÉÄ„Éº -->
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-800">
                        „Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß
                        <span class="text-base font-normal text-gray-500">
                            ({{ filteredProjects.length }}‰ª∂)
                        </span>
                    </h2>
                </div>

                <!-- „Ç´„Éº„ÉâË°®Á§∫ -->
                <div v-if="viewMode === 'card'" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div
                        v-for="project in sortedFilteredProjects"
                        :key="project.id"
                        @click="selectProject(project)"
                        class="bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer overflow-hidden relative"
                    >
                        <!-- ÂÆå‰∫Ü„Çπ„Çø„É≥„Éó -->
                        <div
                            v-if="project.progress >= 100"
                            class="absolute top-3 right-3 complete-stamp"
                        >
                            <span class="text-4xl" title="ÂÆå‰∫Ü">üèÜ</span>
                        </div>

                        <div class="p-6">
                            <h3 class="text-lg font-semibold mb-2 truncate pr-12"
                                :class="isPublished(project) ? 'text-red-600' : 'text-gray-800'"
                                :title="project.name">
                                {{ project.name }}
                            </h3>

                            <!-- ÈÄ≤Êçó„Éê„ÉºÔºà3Ëâ≤Ôºâ -->
                            <div class="h-3 bg-gray-200 rounded-full overflow-hidden flex mb-2">
                                <div
                                    class="h-full bg-green-500 transition-all"
                                    :style="{ width: (project.progress_detail?.html || 0) + '%' }"
                                    title="HTML"
                                ></div>
                                <div
                                    class="h-full bg-blue-500 transition-all"
                                    :style="{ width: (project.progress_detail?.txt || 0) + '%' }"
                                    title="TXT"
                                ></div>
                                <div
                                    class="h-full bg-orange-500 transition-all"
                                    :style="{ width: (project.progress_detail?.mp3 || 0) + '%' }"
                                    title="MP3"
                                ></div>
                            </div>

                            <div class="flex justify-between items-center text-sm">
                                <span class="text-gray-600">
                                    {{ project.completed_topics || 0 }} / {{ project.total_topics || 0 }} „Éà„Éî„ÉÉ„ÇØ
                                </span>
                                <span :class="[
                                    'font-bold',
                                    project.progress >= 100 ? 'text-green-600' : 'text-blue-600'
                                ]">
                                    {{ (project.progress || 0).toFixed(1) }}%
                                </span>
                            </div>

                            <div class="mt-3 flex gap-2 text-xs">
                                <span :class="[
                                    'px-2 py-1 rounded',
                                    project.html_count >= project.total_topics
                                        ? 'bg-green-100 text-green-700'
                                        : 'bg-red-100 text-red-700'
                                ]">
                                    HTML: {{ project.html_count || 0 }}/{{ project.total_topics }}
                                    <span v-if="project.html_count < project.total_topics" class="ml-1">‚ö†Ô∏è</span>
                                </span>
                                <span :class="[
                                    'px-2 py-1 rounded',
                                    project.txt_count >= project.total_topics
                                        ? 'bg-blue-100 text-blue-700'
                                        : 'bg-red-100 text-red-700'
                                ]">
                                    TXT: {{ project.txt_count || 0 }}/{{ project.total_topics }}
                                    <span v-if="project.txt_count < project.total_topics" class="ml-1">‚ö†Ô∏è</span>
                                </span>
                                <span :class="[
                                    'px-2 py-1 rounded',
                                    project.mp3_count >= project.total_topics
                                        ? 'bg-orange-100 text-orange-700'
                                        : 'bg-red-100 text-red-700'
                                ]">
                                    MP3: {{ project.mp3_count || 0 }}/{{ project.total_topics }}
                                    <span v-if="project.mp3_count < project.total_topics" class="ml-1">‚ö†Ô∏è</span>
                                </span>
                                <span v-if="project.mp3_total_duration_ms > 0" class="px-2 py-1 rounded bg-orange-50 text-orange-600">
                                    {{ formatDuration(project.mp3_total_duration_ms) }}
                                </span>
                            </div>
                            <!-- ‰∏çË∂≥„Éï„Ç°„Ç§„É´Ë©≥Á¥∞Ôºà100%Êú™Ê∫Ä„ÅÆÂ†¥Âêà„ÅÆ„ÅøË°®Á§∫Ôºâ -->
                            <div v-if="project.progress < 100 && project.total_topics > 0" class="mt-2 text-xs text-red-600 bg-red-50 rounded p-2">
                                <span class="font-medium">üìã ‰∏çË∂≥:</span>
                                <span v-if="project.html_count < project.total_topics" class="ml-2">
                                    HTML -{{ project.total_topics - project.html_count }}
                                </span>
                                <span v-if="project.txt_count < project.total_topics" class="ml-2">
                                    TXT -{{ project.total_topics - project.txt_count }}
                                </span>
                                <span v-if="project.mp3_count < project.total_topics" class="ml-2">
                                    MP3 -{{ project.total_topics - project.mp3_count }}
                                </span>
                            </div>

                            <!-- Á¥çÂìÅÂÖà„ÉªÈü≥Â£∞Â§âÊèõ„Éª„ÉÅ„Çß„ÉÉ„ÇØÈÄ≤Êçó„Éê„ÉÉ„Ç∏ -->
                            <div class="mt-3 flex gap-2 text-xs flex-wrap">
                                <span v-if="project.destination_name" class="px-2 py-1 bg-purple-100 text-purple-700 rounded">
                                    üì¶ {{ project.destination_name }}
                                </span>
                                <span v-if="project.tts_engine_name" class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded">
                                    üîä {{ project.tts_engine_name }}
                                </span>
                                <span v-if="project.check_status_name" class="px-2 py-1 bg-teal-100 text-teal-700 rounded">
                                    ‚úî {{ project.check_status_name }}
                                </span>
                            </div>
                            <!-- ÂÇôËÄÉ -->
                            <div v-if="project.notes" class="mt-2 text-xs text-gray-500 truncate" :title="project.notes">
                                üìù {{ project.notes }}
                            </div>
                        </div>

                        <div class="px-6 py-3 bg-gray-50 border-t">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs text-gray-500" v-if="project.last_scanned_at">
                                    {{ formatDateTime(project.last_scanned_at) }}
                                </span>
                                <button
                                    @click.stop="openFolder(project.path)"
                                    class="text-gray-500 hover:text-gray-700"
                                    title="„Éï„Ç©„É´„ÉÄ„ÇíÈñã„Åè"
                                >
                                    üìÅ
                                </button>
                            </div>
                            <!-- Ë®≠ÂÆö„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥Ôºà2Âàó„Ç∞„É™„ÉÉ„ÉâÔºâ -->
                            <div class="grid grid-cols-2 gap-1.5 text-xs" @click.stop>
                                <select
                                    :value="project.destination_id || ''"
                                    @change="onDestinationChange(project.id, $event.target.value)"
                                    class="px-2 py-1 border rounded text-xs"
                                >
                                    <option value="">üì¶ Á¥çÂìÅÂÖà</option>
                                    <option v-for="dest in destinations" :key="dest.id" :value="dest.id">
                                        {{ dest.name }}
                                    </option>
                                </select>
                                <select
                                    :value="project.tts_engine_id || ''"
                                    @change="onTtsEngineChange(project.id, $event.target.value)"
                                    class="px-2 py-1 border rounded text-xs"
                                >
                                    <option value="">üîä Èü≥Â£∞</option>
                                    <option v-for="tts in ttsEngines" :key="tts.id" :value="tts.id">
                                        {{ tts.name }}
                                    </option>
                                </select>
                                <select
                                    :value="project.publication_status_id || ''"
                                    @change="onPublicationStatusChange(project.id, $event.target.value)"
                                    class="px-2 py-1 border rounded text-xs"
                                >
                                    <option value="">üìã ÂÖ¨ÈñãÁä∂ÊÖã</option>
                                    <option v-for="status in publicationStatuses" :key="status.id" :value="status.id">
                                        {{ status.name }}
                                    </option>
                                </select>
                                <select
                                    :value="project.check_status_id || ''"
                                    @change="onCheckStatusChange(project.id, $event.target.value)"
                                    class="px-2 py-1 border rounded text-xs"
                                >
                                    <option value="">‚úî „ÉÅ„Çß„ÉÉ„ÇØ</option>
                                    <option v-for="cs in checkStatuses" :key="cs.id" :value="cs.id">
                                        {{ cs.name }}
                                    </option>
                                </select>
                            </div>
                            <div class="mt-1.5" @click.stop>
                                <input
                                    type="text"
                                    :value="project.notes || ''"
                                    @input="onNotesChange(project.id, $event.target.value)"
                                    placeholder="üìù ÂÇôËÄÉ"
                                    class="w-full px-2 py-1 border rounded text-xs"
                                >
                            </div>
                        </div>
                    </div>
                </div>

                <!-- „É™„Çπ„ÉàË°®Á§∫ -->
                <div v-else class="bg-white rounded-lg shadow overflow-hidden overflow-x-auto">
                    <table class="w-full text-sm min-w-[1100px]">
                        <thead>
                            <tr class="bg-gray-50 border-b text-gray-500 font-medium">
                                <th class="text-left px-4 py-3 w-[18%]">„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç</th>
                                <th class="text-center px-2 py-3 w-[14%]">ÈÄ≤Êçó</th>
                                <th class="text-center px-2 py-3 w-[8%]">„Éï„Ç°„Ç§„É´</th>
                                <th class="text-center px-1 py-3 w-[10%]">Á¥çÂìÅÂÖà</th>
                                <th class="text-center px-1 py-3 w-[10%]">Èü≥Â£∞Â§âÊèõ</th>
                                <th class="text-center px-1 py-3 w-[10%]">ÂÖ¨ÈñãÁä∂ÊÖã</th>
                                <th class="text-center px-1 py-3 w-[8%]">„ÉÅ„Çß„ÉÉ„ÇØ</th>
                                <th class="text-center px-1 py-3 w-[14%]">ÂÇôËÄÉ</th>
                                <th class="text-center px-2 py-3 w-[5%]">„Éà„Éî„ÉÉ„ÇØ</th>
                                <th class="text-center px-1 py-3 w-[3%]"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr
                                v-for="project in sortedFilteredProjects"
                                :key="project.id"
                                @click="selectProject(project)"
                                class="border-b hover:bg-blue-50 cursor-pointer transition-colors list-item-hover"
                            >
                                <td class="px-4 py-2.5">
                                    <span class="font-medium truncate block"
                                        :class="isPublished(project) ? 'text-red-600' : 'text-gray-800'"
                                        :title="project.name">
                                        {{ project.name }}
                                    </span>
                                </td>
                                <td class="px-2 py-2.5">
                                    <div class="flex items-center gap-1.5">
                                        <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                                            <div
                                                :class="[
                                                    'h-full transition-all',
                                                    project.progress >= 100 ? 'bg-green-500' : 'bg-blue-500'
                                                ]"
                                                :style="{ width: Math.min(project.progress, 100) + '%' }"
                                            ></div>
                                        </div>
                                        <span :class="[
                                            'text-xs font-bold w-10 text-right whitespace-nowrap',
                                            project.progress >= 100 ? 'text-green-600' : 'text-blue-600'
                                        ]">
                                            {{ project.progress.toFixed(1) }}%
                                        </span>
                                    </div>
                                </td>
                                <td class="px-2 py-2.5 text-center">
                                    <div class="flex justify-center gap-1 text-xs">
                                        <span :class="project.html_count >= project.total_topics ? 'text-green-600' : 'text-red-500 font-bold'" title="HTML">
                                            H:{{ project.html_count }}
                                        </span>
                                        <span :class="project.txt_count >= project.total_topics ? 'text-blue-600' : 'text-red-500 font-bold'" title="TXT">
                                            T:{{ project.txt_count }}
                                        </span>
                                        <span :class="project.mp3_count >= project.total_topics ? 'text-orange-500' : 'text-red-500 font-bold'" title="MP3">
                                            M:{{ project.mp3_count }}
                                        </span>
                                        <span v-if="project.mp3_total_duration_ms > 0" class="text-orange-400" title="ÂÜçÁîüÊôÇÈñì">
                                            {{ formatDuration(project.mp3_total_duration_ms) }}
                                        </span>
                                    </div>
                                </td>
                                <td class="px-1 py-2.5" @click.stop>
                                    <select
                                        :value="project.destination_id || ''"
                                        @change="onDestinationChange(project.id, $event.target.value)"
                                        class="w-full px-1 py-1 border rounded text-xs"
                                    >
                                        <option value="">-</option>
                                        <option v-for="dest in destinations" :key="dest.id" :value="dest.id">
                                            {{ dest.name }}
                                        </option>
                                    </select>
                                </td>
                                <td class="px-1 py-2.5" @click.stop>
                                    <select
                                        :value="project.tts_engine_id || ''"
                                        @change="onTtsEngineChange(project.id, $event.target.value)"
                                        class="w-full px-1 py-1 border rounded text-xs"
                                    >
                                        <option value="">-</option>
                                        <option v-for="tts in ttsEngines" :key="tts.id" :value="tts.id">
                                            {{ tts.name }}
                                        </option>
                                    </select>
                                </td>
                                <td class="px-1 py-2.5" @click.stop>
                                    <select
                                        :value="project.publication_status_id || ''"
                                        @change="onPublicationStatusChange(project.id, $event.target.value)"
                                        class="w-full px-1 py-1 border rounded text-xs"
                                    >
                                        <option value="">-</option>
                                        <option v-for="status in publicationStatuses" :key="status.id" :value="status.id">
                                            {{ status.name }}
                                        </option>
                                    </select>
                                </td>
                                <td class="px-1 py-2.5" @click.stop>
                                    <select
                                        :value="project.check_status_id || ''"
                                        @change="onCheckStatusChange(project.id, $event.target.value)"
                                        class="w-full px-1 py-1 border rounded text-xs"
                                    >
                                        <option value="">-</option>
                                        <option v-for="cs in checkStatuses" :key="cs.id" :value="cs.id">
                                            {{ cs.name }}
                                        </option>
                                    </select>
                                </td>
                                <td class="px-1 py-2.5" @click.stop>
                                    <input
                                        type="text"
                                        :value="project.notes || ''"
                                        @input="onNotesChange(project.id, $event.target.value)"
                                        placeholder="ÂÇôËÄÉ"
                                        class="w-full px-1 py-1 border rounded text-xs"
                                    >
                                </td>
                                <td class="px-2 py-2.5 text-center text-xs text-gray-600 whitespace-nowrap">
                                    {{ project.completed_topics }}/{{ project.total_topics }}
                                </td>
                                <td class="px-1 py-2.5 text-center">
                                    <span v-if="project.progress >= 100" class="text-lg" title="ÂÆå‰∫Ü">üèÜ</span>
                                    <span v-else-if="project.progress > 0" class="text-sm" title="ÈÄ≤Ë°å‰∏≠">üîÑ</span>
                                    <span v-else class="text-sm text-gray-400" title="Êú™ÁùÄÊâã">‚óã</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Á©∫Áä∂ÊÖã -->
                <div v-if="filteredProjects.length === 0" class="text-center py-20">
                    <p class="text-gray-500 text-lg">
                        {{ projectFilter === 'custom' ? 'ÊåáÂÆöÁØÑÂõ≤„Å´Ë©≤ÂΩì„Åô„Çã„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì' : '„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì' }}
                    </p>
                    <button
                        v-if="projectFilter !== 'all'"
                        @click="projectFilter = 'all'"
                        class="mt-4 px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                    >
                        „Éï„Ç£„É´„Çø„Éº„Çí„ÇØ„É™„Ç¢
                    </button>
                </div>
            </div>

            <!-- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàË©≥Á¥∞ -->
            <div v-else-if="currentView === 'detail' && selectedProject" class="fade-in">
                <!-- „Éñ„É¨„ÉÉ„Éâ„ÇØ„É©„É† -->
                <div class="mb-6">
                    <button @click="currentView = 'dashboard'" class="text-blue-500 hover:text-blue-600">
                        ‚Üê „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´Êàª„Çã
                    </button>
                </div>

                <!-- „Éó„É≠„Ç∏„Çß„ÇØ„Éà„Éò„ÉÉ„ÉÄ„Éº -->
                <div class="bg-white rounded-lg shadow p-6 mb-6 relative">
                    <!-- ÂÆå‰∫Ü„Çπ„Çø„É≥„ÉóÔºàÂ§ßÔºâ -->
                    <div
                        v-if="selectedProject.progress >= 100"
                        class="absolute top-4 right-4 complete-stamp"
                    >
                        <div class="text-center">
                            <span class="text-6xl">üèÜ</span>
                            <p class="text-green-600 font-bold text-sm mt-1">COMPLETE</p>
                        </div>
                    </div>

                    <div class="flex justify-between items-start">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">{{ selectedProject.name }}</h2>
                            <p class="text-gray-500 text-sm">{{ selectedProject.path }}</p>
                        </div>
                        <div class="text-right mr-24">
                            <p :class="[
                                'text-4xl font-bold',
                                selectedProject.progress >= 100 ? 'text-green-600' : 'text-blue-600'
                            ]">
                                {{ (selectedProject.progress || 0).toFixed(1) }}%
                            </p>
                            <p class="text-sm text-gray-500">
                                {{ selectedProject.completed_topics || 0 }} / {{ selectedProject.total_topics || 0 }} ÂÆå‰∫Ü
                            </p>
                        </div>
                    </div>

                    <!-- ÈÄ≤Êçó„Éê„Éº -->
                    <div class="mt-4 h-4 bg-gray-200 rounded-full overflow-hidden flex">
                        <div
                            class="h-full bg-green-500"
                            :style="{ width: (selectedProject.progress_detail?.html || 0) + '%' }"
                        ></div>
                        <div
                            class="h-full bg-blue-500"
                            :style="{ width: (selectedProject.progress_detail?.txt || 0) + '%' }"
                        ></div>
                        <div
                            class="h-full bg-orange-500"
                            :style="{ width: (selectedProject.progress_detail?.mp3 || 0) + '%' }"
                        ></div>
                    </div>
                    <div class="mt-2 flex gap-4 text-sm">
                        <span class="flex items-center gap-1">
                            <span class="w-3 h-3 bg-green-500 rounded"></span>
                            HTML: {{ selectedProject.html_count || 0 }}/{{ selectedProject.total_topics || 0 }}
                            <span v-if="selectedProject.html_count < selectedProject.total_topics" class="text-red-500">
                                (‰∏çË∂≥: {{ selectedProject.total_topics - selectedProject.html_count }})
                            </span>
                        </span>
                        <span class="flex items-center gap-1">
                            <span class="w-3 h-3 bg-blue-500 rounded"></span>
                            TXT: {{ selectedProject.txt_count || 0 }}/{{ selectedProject.total_topics || 0 }}
                            <span v-if="selectedProject.txt_count < selectedProject.total_topics" class="text-red-500">
                                (‰∏çË∂≥: {{ selectedProject.total_topics - selectedProject.txt_count }})
                            </span>
                        </span>
                        <span class="flex items-center gap-1">
                            <span class="w-3 h-3 bg-orange-500 rounded"></span>
                            MP3: {{ selectedProject.mp3_count || 0 }}/{{ selectedProject.total_topics || 0 }}
                            <span v-if="selectedProject.mp3_count < selectedProject.total_topics" class="text-red-500">
                                (‰∏çË∂≥: {{ selectedProject.total_topics - selectedProject.mp3_count }})
                            </span>
                        </span>
                    </div>

                    <!-- ‰∏çË∂≥„Éï„Ç°„Ç§„É´‰∏ÄË¶ß„Å∏„ÅÆ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„ÉàÔºàÈÄ≤Ë°å‰∏≠„Åå„ÅÇ„ÇãÂ†¥ÂêàÔºâ -->
                    <div v-if="topicSummary.in_progress > 0" class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <span class="text-yellow-600 text-lg">‚ö†Ô∏è</span>
                                <span class="text-sm text-yellow-800">
                                    <strong>{{ topicSummary.in_progress }}‰ª∂</strong>„ÅÆ„Éà„Éî„ÉÉ„ÇØ„Åå‰∏ÄÈÉ®„Éï„Ç°„Ç§„É´‰∏çË∂≥„Åß„Åô
                                </span>
                            </div>
                            <button
                                @click="topicFilter = 'in_progress'"
                                class="px-3 py-1 bg-yellow-500 text-white text-sm rounded hover:bg-yellow-600"
                            >
                                ‰∏çË∂≥‰∏ÄË¶ß„ÇíË°®Á§∫
                            </button>
                        </div>
                    </div>
                </div>

                <!-- „Éï„Ç£„É´„Çø„Éº -->
                <div class="flex gap-4 mb-6">
                    <button
                        v-for="filter in ['all', 'completed', 'in_progress', 'not_started']"
                        :key="filter"
                        @click="topicFilter = filter"
                        :class="[
                            'px-4 py-2 rounded-lg transition-colors',
                            topicFilter === filter
                                ? 'bg-blue-500 text-white'
                                : 'bg-white text-gray-600 hover:bg-gray-100'
                        ]"
                    >
                        {{ filterLabels[filter] }}
                        <span class="ml-1 text-xs opacity-75">({{ getFilterCount(filter) }})</span>
                    </button>
                </div>

                <!-- „Éà„Éî„ÉÉ„ÇØ‰∏ÄË¶ßÔºà„Çµ„Éñ„Éï„Ç©„É´„ÉÄÈöéÂ±§Ë°®Á§∫Ôºâ -->
                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <div class="virtual-scroll-container" style="max-height: 600px;">
                        <!-- „Éï„Ç©„É´„ÉÄ„Åî„Å®„Å´„Ç∞„É´„Éº„ÉóÂåñ -->
                        <div v-for="folder in groupedTopics" :key="folder.key" class="border-b last:border-b-0">
                            <!-- „Éï„Ç©„É´„ÉÄ„Éò„ÉÉ„ÉÄ„ÉºÔºà„ÇØ„É™„ÉÉ„ÇØ„ÅßÂ±ïÈñã/Êäò„Çä„Åü„Åü„ÅøÔºâ -->
                            <div
                                @click="toggleFolder(folder.key)"
                                class="px-4 py-3 bg-gray-50 hover:bg-gray-100 cursor-pointer flex justify-between items-center transition-colors"
                            >
                                <div class="flex items-center gap-3">
                                    <!-- Â±ïÈñã/Êäò„Çä„Åü„Åü„Åø„Ç¢„Ç§„Ç≥„É≥ -->
                                    <span class="text-gray-400 text-sm transition-transform" :class="{ 'rotate-90': isFolderExpanded(folder.key) }">
                                        ‚ñ∂
                                    </span>
                                    <!-- „Éï„Ç©„É´„ÉÄ„Ç¢„Ç§„Ç≥„É≥ -->
                                    <span class="text-yellow-500">üìÅ</span>
                                    <!-- „Éï„Ç©„É´„ÉÄÂêç -->
                                    <span class="font-medium text-gray-700">{{ folder.name }}</span>
                                    <!-- „Éà„Éî„ÉÉ„ÇØÊï∞ -->
                                    <span class="text-xs text-gray-500">({{ folder.topics.length }}‰ª∂)</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <!-- ÈÄ≤Êçó„Éê„Éº -->
                                    <div class="w-24 h-2 bg-gray-200 rounded-full overflow-hidden">
                                        <div
                                            class="h-full bg-green-500 transition-all duration-300"
                                            :style="{ width: folder.progress + '%' }"
                                        ></div>
                                    </div>
                                    <span class="text-sm text-gray-600 w-12 text-right">{{ folder.progress }}%</span>
                                    <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„ÉÉ„Ç∏ -->
                                    <div class="flex gap-1 text-xs">
                                        <span class="px-2 py-0.5 bg-green-100 text-green-700 rounded">{{ folder.completed }}</span>
                                        <span class="px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded">{{ folder.in_progress }}</span>
                                        <span class="px-2 py-0.5 bg-gray-100 text-gray-700 rounded">{{ folder.not_started }}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- „Éà„Éî„ÉÉ„ÇØ„É™„Çπ„ÉàÔºàÂ±ïÈñãÊôÇ„ÅÆ„ÅøË°®Á§∫Ôºâ -->
                            <div v-show="isFolderExpanded(folder.key)">
                                <div
                                    v-for="topic in folder.topics"
                                    :key="topic.id"
                                    class="virtual-scroll-item p-4 pl-12 border-t hover:bg-gray-50 transition-colors"
                                >
                                    <div class="flex justify-between items-center">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2">
                                                <span
                                                    :class="[
                                                        'w-2 h-2 rounded-full',
                                                        topic.status === 'completed' ? 'bg-green-500' :
                                                        topic.status === 'in_progress' ? 'bg-yellow-500' : 'bg-gray-300'
                                                    ]"
                                                ></span>
                                                <span class="font-medium text-gray-800">
                                                    {{ topic.topic_id || topic.base_name }}
                                                </span>
                                                <span class="text-gray-500">-</span>
                                                <span class="text-gray-600">
                                                    {{ topic.title || topic.base_name }}
                                                </span>
                                                <!-- ÂÆå‰∫Ü„Éû„Éº„ÇØ -->
                                                <span v-if="topic.status === 'completed'" class="text-green-500 text-lg">‚úì</span>
                                            </div>
                                        </div>

                                        <div class="flex gap-2">
                                            <span
                                                :class="[
                                                    'w-8 h-8 flex items-center justify-center rounded text-sm font-medium',
                                                    topic.has_html ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-600 border-2 border-red-300'
                                                ]"
                                                :title="topic.has_html ? 'HTML: OK' : 'HTML: ‰∏çË∂≥'"
                                            >
                                                {{ topic.has_html ? '‚úì' : '‚úó' }}
                                            </span>
                                            <span
                                                :class="[
                                                    'w-8 h-8 flex items-center justify-center rounded text-sm font-medium',
                                                    topic.has_txt ? 'bg-blue-100 text-blue-700' : 'bg-red-100 text-red-600 border-2 border-red-300'
                                                ]"
                                                :title="topic.has_txt ? 'TXT: OK' : 'TXT: ‰∏çË∂≥'"
                                            >
                                                {{ topic.has_txt ? '‚úì' : '‚úó' }}
                                            </span>
                                            <span
                                                :class="[
                                                    'w-8 h-8 flex items-center justify-center rounded text-sm font-medium',
                                                    topic.has_mp3 ? 'bg-orange-100 text-orange-700' : 'bg-red-100 text-red-600 border-2 border-red-300'
                                                ]"
                                                :title="topic.has_mp3 ? 'MP3: OK' : 'MP3: ‰∏çË∂≥'"
                                            >
                                                {{ topic.has_mp3 ? '‚úì' : '‚úó' }}
                                            </span>
                                            <span
                                                :class="[
                                                    'w-8 h-8 flex items-center justify-center rounded text-sm',
                                                    topic.has_ssml ? 'bg-purple-100 text-purple-700' : 'bg-gray-100 text-gray-400'
                                                ]"
                                                title="SSML"
                                            >
                                                {{ topic.has_ssml ? '‚úì' : '‚ñ°' }}
                                            </span>
                                        </div>
                                        <!-- ‰∏çË∂≥„Éï„Ç°„Ç§„É´Á®ÆÂà•„ÇíÊòéÁ§∫ÔºàÈÄ≤Ë°å‰∏≠„ÅÆÂ†¥ÂêàÔºâ -->
                                        <div v-if="topic.status === 'in_progress'" class="ml-2 text-xs text-red-600">
                                            ‰∏çË∂≥:
                                            <span v-if="!topic.has_html">HTML</span>
                                            <span v-if="!topic.has_txt">TXT</span>
                                            <span v-if="!topic.has_mp3">MP3</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- „Çµ„Éñ„Éï„Ç©„É´„ÉÄ„Åå„Å™„ÅÑÂ†¥Âêà„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØË°®Á§∫ -->
                        <div v-if="groupedTopics.length === 0 && filteredTopics.length > 0">
                            <div
                                v-for="topic in filteredTopics"
                                :key="topic.id"
                                class="virtual-scroll-item p-4 border-b hover:bg-gray-50 transition-colors"
                            >
                                <div class="flex justify-between items-center">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2">
                                            <span
                                                :class="[
                                                    'w-2 h-2 rounded-full',
                                                    topic.status === 'completed' ? 'bg-green-500' :
                                                    topic.status === 'in_progress' ? 'bg-yellow-500' : 'bg-gray-300'
                                                ]"
                                            ></span>
                                            <span class="font-medium text-gray-800">
                                                {{ topic.topic_id || topic.base_name }}
                                            </span>
                                            <span class="text-gray-500">-</span>
                                            <span class="text-gray-600">
                                                {{ topic.title || topic.base_name }}
                                            </span>
                                            <span v-if="topic.status === 'completed'" class="text-green-500 text-lg">‚úì</span>
                                        </div>
                                    </div>

                                    <div class="flex gap-2">
                                        <span
                                            :class="[
                                                'w-8 h-8 flex items-center justify-center rounded text-sm font-medium',
                                                topic.has_html ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-600 border-2 border-red-300'
                                            ]"
                                            :title="topic.has_html ? 'HTML: OK' : 'HTML: ‰∏çË∂≥'"
                                        >
                                            {{ topic.has_html ? '‚úì' : '‚úó' }}
                                        </span>
                                        <span
                                            :class="[
                                                'w-8 h-8 flex items-center justify-center rounded text-sm font-medium',
                                                topic.has_txt ? 'bg-blue-100 text-blue-700' : 'bg-red-100 text-red-600 border-2 border-red-300'
                                            ]"
                                            :title="topic.has_txt ? 'TXT: OK' : 'TXT: ‰∏çË∂≥'"
                                        >
                                            {{ topic.has_txt ? '‚úì' : '‚úó' }}
                                        </span>
                                        <span
                                            :class="[
                                                'w-8 h-8 flex items-center justify-center rounded text-sm font-medium',
                                                topic.has_mp3 ? 'bg-orange-100 text-orange-700' : 'bg-red-100 text-red-600 border-2 border-red-300'
                                            ]"
                                            :title="topic.has_mp3 ? 'MP3: OK' : 'MP3: ‰∏çË∂≥'"
                                        >
                                            {{ topic.has_mp3 ? '‚úì' : '‚úó' }}
                                        </span>
                                        <span
                                            :class="[
                                                'w-8 h-8 flex items-center justify-center rounded text-sm',
                                                topic.has_ssml ? 'bg-purple-100 text-purple-700' : 'bg-gray-100 text-gray-400'
                                            ]"
                                            title="SSML"
                                        >
                                            {{ topic.has_ssml ? '‚úì' : '‚ñ°' }}
                                        </span>
                                    </div>
                                    <!-- ‰∏çË∂≥„Éï„Ç°„Ç§„É´Á®ÆÂà•„ÇíÊòéÁ§∫ÔºàÈÄ≤Ë°å‰∏≠„ÅÆÂ†¥ÂêàÔºâ -->
                                    <div v-if="topic.status === 'in_progress'" class="ml-2 text-xs text-red-600">
                                        ‰∏çË∂≥:
                                        <span v-if="!topic.has_html">HTML</span>
                                        <span v-if="!topic.has_txt">TXT</span>
                                        <span v-if="!topic.has_mp3">MP3</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- „Çµ„Éû„É™„Éº -->
                <div class="mt-6 grid grid-cols-3 gap-4">
                    <div class="bg-green-50 rounded-lg p-4 text-center">
                        <p class="text-2xl font-bold text-green-600">{{ topicSummary.completed }}</p>
                        <p class="text-sm text-green-700">ÂÆå‰∫Ü</p>
                    </div>
                    <div class="bg-yellow-50 rounded-lg p-4 text-center">
                        <p class="text-2xl font-bold text-yellow-600">{{ topicSummary.in_progress }}</p>
                        <p class="text-sm text-yellow-700">ÈÄ≤Ë°å‰∏≠</p>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4 text-center">
                        <p class="text-2xl font-bold text-gray-600">{{ topicSummary.not_started }}</p>
                        <p class="text-sm text-gray-700">Êú™ÁùÄÊâã</p>
                    </div>
                </div>
            </div>

            <!-- Ë®≠ÂÆöÁîªÈù¢ -->
            <div v-else-if="currentView === 'settings'" class="fade-in">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">‚öôÔ∏è Ë®≠ÂÆö</h2>

                <!-- „Çø„ÉñÂàá„ÇäÊõø„Åà -->
                <div class="flex gap-2 mb-6">
                    <button
                        @click="settingsTab = 'destinations'"
                        :class="[
                            'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                            settingsTab === 'destinations'
                                ? 'bg-purple-500 text-white'
                                : 'bg-white text-gray-600 hover:bg-gray-100'
                        ]"
                    >
                        üì¶ Á¥çÂìÅÂÖà„Éû„Çπ„Çø„Éº
                    </button>
                    <button
                        @click="settingsTab = 'tts-engines'"
                        :class="[
                            'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                            settingsTab === 'tts-engines'
                                ? 'bg-indigo-500 text-white'
                                : 'bg-white text-gray-600 hover:bg-gray-100'
                        ]"
                    >
                        üîä Èü≥Â£∞Â§âÊèõ„Éû„Çπ„Çø„Éº
                    </button>
                    <button
                        @click="settingsTab = 'publication-statuses'"
                        :class="[
                            'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                            settingsTab === 'publication-statuses'
                                ? 'bg-green-500 text-white'
                                : 'bg-white text-gray-600 hover:bg-gray-100'
                        ]"
                    >
                        üìã ÂÖ¨ÈñãÁä∂ÊÖã„Éû„Çπ„Çø„Éº
                    </button>
                    <button
                        @click="settingsTab = 'check-statuses'"
                        :class="[
                            'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
                            settingsTab === 'check-statuses'
                                ? 'bg-teal-500 text-white'
                                : 'bg-white text-gray-600 hover:bg-gray-100'
                        ]"
                    >
                        ‚úî „ÉÅ„Çß„ÉÉ„ÇØÈÄ≤Êçó„Éû„Çπ„Çø„Éº
                    </button>
                </div>

                <!-- Á¥çÂìÅÂÖà„Éû„Çπ„Çø„Éº -->
                <div v-if="settingsTab === 'destinations'" class="bg-white rounded-lg shadow">
                    <div class="p-6 border-b">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                            üì¶ Á¥çÂìÅÂÖà„Éû„Çπ„Çø„Éº
                            <span class="text-sm font-normal text-gray-500">({{ destinations.length }}‰ª∂)</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÁ¥çÂìÅÂÖà„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô</p>
                    </div>

                    <!-- ‰∏ÄË¶ß -->
                    <div class="divide-y" ref="destinationListRef">
                        <div
                            v-for="(dest, index) in destinations"
                            :key="dest.id"
                            :data-id="dest.id"
                            class="flex items-center justify-between px-6 py-4 hover:bg-gray-50"
                        >
                            <div class="flex items-center gap-4">
                                <span class="drag-handle cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500 select-none" title="„Éâ„É©„ÉÉ„Ç∞„Åß‰∏¶„ÅπÊõø„Åà">&#x2807;</span>
                                <span class="text-gray-400 text-sm w-6">{{ index + 1 }}.</span>
                                <!-- Á∑®ÈõÜ„É¢„Éº„Éâ -->
                                <div v-if="editingItem && editingItem.id === dest.id">
                                    <input
                                        v-model="editingItem.name"
                                        type="text"
                                        class="px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        @keyup.enter="saveEditing"
                                        @keyup.esc="cancelEditing"
                                    >
                                </div>
                                <!-- Ë°®Á§∫„É¢„Éº„Éâ -->
                                <span v-else class="text-gray-800 font-medium">{{ dest.name }}</span>
                            </div>
                            <div class="flex gap-2">
                                <template v-if="editingItem && editingItem.id === dest.id">
                                    <button
                                        @click="saveEditing"
                                        class="px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600"
                                    >
                                        ‰øùÂ≠ò
                                    </button>
                                    <button
                                        @click="cancelEditing"
                                        class="px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400"
                                    >
                                        „Ç≠„É£„É≥„Çª„É´
                                    </button>
                                </template>
                                <template v-else>
                                    <button
                                        @click="startEditing(dest)"
                                        class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded hover:bg-gray-200"
                                        title="Á∑®ÈõÜ"
                                    >
                                        ‚úèÔ∏è
                                    </button>
                                    <button
                                        @click="deleteDestination(dest.id)"
                                        class="px-3 py-1 bg-red-100 text-red-600 text-sm rounded hover:bg-red-200"
                                        title="ÂâäÈô§"
                                    >
                                        üóëÔ∏è
                                    </button>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Êñ∞Ë¶èËøΩÂä† -->
                    <div class="p-6 border-t bg-gray-50">
                        <div class="flex gap-2">
                            <input
                                v-model="newItemName"
                                type="text"
                                placeholder="Êñ∞„Åó„ÅÑÁ¥çÂìÅÂÖà„ÅÆÂêçÂâç"
                                class="flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"
                                @keyup.enter="addDestination"
                            >
                            <button
                                @click="addDestination"
                                :disabled="!newItemName.trim()"
                                class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                            >
                                Ôºã ËøΩÂä†
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Èü≥Â£∞Â§âÊèõ„Éû„Çπ„Çø„Éº -->
                <div v-else-if="settingsTab === 'tts-engines'" class="bg-white rounded-lg shadow">
                    <div class="p-6 border-b">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                            üîä Èü≥Â£∞Â§âÊèõ„Éû„Çπ„Çø„Éº
                            <span class="text-sm font-normal text-gray-500">({{ ttsEngines.length }}‰ª∂)</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Èü≥Â£∞ÁîüÊàê„Å´‰ΩøÁî®„Åô„ÇãTTS„Ç®„É≥„Ç∏„É≥„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô</p>
                    </div>

                    <!-- ‰∏ÄË¶ß -->
                    <div class="divide-y" ref="ttsEngineListRef">
                        <div
                            v-for="(tts, index) in ttsEngines"
                            :key="tts.id"
                            :data-id="tts.id"
                            class="flex items-center justify-between px-6 py-4 hover:bg-gray-50"
                        >
                            <div class="flex items-center gap-4">
                                <span class="drag-handle cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500 select-none" title="„Éâ„É©„ÉÉ„Ç∞„Åß‰∏¶„ÅπÊõø„Åà">&#x2807;</span>
                                <span class="text-gray-400 text-sm w-6">{{ index + 1 }}.</span>
                                <!-- Á∑®ÈõÜ„É¢„Éº„Éâ -->
                                <div v-if="editingItem && editingItem.id === tts.id">
                                    <input
                                        v-model="editingItem.name"
                                        type="text"
                                        class="px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                        @keyup.enter="saveEditing"
                                        @keyup.esc="cancelEditing"
                                    >
                                </div>
                                <!-- Ë°®Á§∫„É¢„Éº„Éâ -->
                                <span v-else class="text-gray-800 font-medium">{{ tts.name }}</span>
                            </div>
                            <div class="flex gap-2">
                                <template v-if="editingItem && editingItem.id === tts.id">
                                    <button
                                        @click="saveEditing"
                                        class="px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600"
                                    >
                                        ‰øùÂ≠ò
                                    </button>
                                    <button
                                        @click="cancelEditing"
                                        class="px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400"
                                    >
                                        „Ç≠„É£„É≥„Çª„É´
                                    </button>
                                </template>
                                <template v-else>
                                    <button
                                        @click="startEditing(tts)"
                                        class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded hover:bg-gray-200"
                                        title="Á∑®ÈõÜ"
                                    >
                                        ‚úèÔ∏è
                                    </button>
                                    <button
                                        @click="deleteTtsEngine(tts.id)"
                                        class="px-3 py-1 bg-red-100 text-red-600 text-sm rounded hover:bg-red-200"
                                        title="ÂâäÈô§"
                                    >
                                        üóëÔ∏è
                                    </button>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Êñ∞Ë¶èËøΩÂä† -->
                    <div class="p-6 border-t bg-gray-50">
                        <div class="flex gap-2">
                            <input
                                v-model="newItemName"
                                type="text"
                                placeholder="Êñ∞„Åó„ÅÑÈü≥Â£∞Â§âÊèõ„Ç®„É≥„Ç∏„É≥„ÅÆÂêçÂâç"
                                class="flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                @keyup.enter="addTtsEngine"
                            >
                            <button
                                @click="addTtsEngine"
                                :disabled="!newItemName.trim()"
                                class="px-4 py-2 bg-indigo-500 text-white rounded-lg text-sm hover:bg-indigo-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                            >
                                Ôºã ËøΩÂä†
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ÂÖ¨ÈñãÁä∂ÊÖã„Éû„Çπ„Çø„Éº -->
                <div v-else-if="settingsTab === 'publication-statuses'" class="bg-white rounded-lg shadow">
                    <div class="p-6 border-b">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                            üìã ÂÖ¨ÈñãÁä∂ÊÖã„Éû„Çπ„Çø„Éº
                            <span class="text-sm font-normal text-gray-500">({{ publicationStatuses.length }}‰ª∂)</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÂÖ¨ÈñãÁä∂ÊÖã„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô</p>
                    </div>

                    <!-- ‰∏ÄË¶ß -->
                    <div class="divide-y" ref="publicationStatusListRef">
                        <div
                            v-for="(status, index) in publicationStatuses"
                            :key="status.id"
                            :data-id="status.id"
                            class="flex items-center justify-between p-4 hover:bg-gray-50"
                        >
                            <div class="flex items-center gap-3">
                                <span class="drag-handle cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500 select-none" title="„Éâ„É©„ÉÉ„Ç∞„Åß‰∏¶„ÅπÊõø„Åà">&#x2807;</span>
                                <span class="text-gray-400 text-sm">{{ index + 1 }}.</span>
                                <template v-if="editingItem && editingItem.id === status.id">
                                    <input
                                        v-model="editingItem.name"
                                        type="text"
                                        class="px-2 py-1 border rounded text-sm focus:outline-none focus:ring-2 focus:ring-green-500"
                                        @keyup.enter="saveEditing"
                                        @keyup.escape="cancelEditing"
                                    >
                                </template>
                                <template v-else>
                                    <span class="font-medium text-gray-800">{{ status.name }}</span>
                                </template>
                            </div>
                            <div class="flex items-center gap-2">
                                <template v-if="editingItem && editingItem.id === status.id">
                                    <button
                                        @click="saveEditing"
                                        class="px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600"
                                    >
                                        ‰øùÂ≠ò
                                    </button>
                                    <button
                                        @click="cancelEditing"
                                        class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded hover:bg-gray-200"
                                    >
                                        „Ç≠„É£„É≥„Çª„É´
                                    </button>
                                </template>
                                <template v-else>
                                    <button
                                        @click="startEditing(status)"
                                        class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded hover:bg-gray-200"
                                        title="Á∑®ÈõÜ"
                                    >
                                        ‚úèÔ∏è
                                    </button>
                                    <button
                                        @click="deletePublicationStatus(status.id)"
                                        class="px-3 py-1 bg-red-100 text-red-600 text-sm rounded hover:bg-red-200"
                                        title="ÂâäÈô§"
                                    >
                                        üóëÔ∏è
                                    </button>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Êñ∞Ë¶èËøΩÂä† -->
                    <div class="p-6 border-t bg-gray-50">
                        <div class="flex gap-2">
                            <input
                                v-model="newItemName"
                                type="text"
                                placeholder="Êñ∞„Åó„ÅÑÂÖ¨ÈñãÁä∂ÊÖã„ÅÆÂêçÂâçÔºà‰æã: üÜì ÁÑ°ÊñôÂÖ¨ÈñãÔºâ"
                                class="flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"
                                @keyup.enter="addPublicationStatus"
                            >
                            <button
                                @click="addPublicationStatus"
                                :disabled="!newItemName.trim()"
                                class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                            >
                                Ôºã ËøΩÂä†
                            </button>
                        </div>
                    </div>
                </div>

                <!-- „ÉÅ„Çß„ÉÉ„ÇØÈÄ≤Êçó„Éû„Çπ„Çø„Éº -->
                <div v-else-if="settingsTab === 'check-statuses'" class="bg-white rounded-lg shadow">
                    <div class="p-6 border-b">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                            ‚úî „ÉÅ„Çß„ÉÉ„ÇØÈÄ≤Êçó„Éû„Çπ„Çø„Éº
                            <span class="text-sm font-normal text-gray-500">({{ checkStatuses.length }}‰ª∂)</span>
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØÈÄ≤ÊçóÁä∂ÊÖã„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô</p>
                    </div>

                    <!-- ‰∏ÄË¶ß -->
                    <div class="divide-y" ref="checkStatusListRef">
                        <div
                            v-for="(cs, index) in checkStatuses"
                            :key="cs.id"
                            :data-id="cs.id"
                            class="flex items-center justify-between px-6 py-4 hover:bg-gray-50"
                        >
                            <div class="flex items-center gap-4">
                                <span class="drag-handle cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500 select-none" title="„Éâ„É©„ÉÉ„Ç∞„Åß‰∏¶„ÅπÊõø„Åà">&#x2807;</span>
                                <span class="text-gray-400 text-sm w-6">{{ index + 1 }}.</span>
                                <!-- Á∑®ÈõÜ„É¢„Éº„Éâ -->
                                <div v-if="editingItem && editingItem.id === cs.id">
                                    <input
                                        v-model="editingItem.name"
                                        type="text"
                                        class="px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"
                                        @keyup.enter="saveEditing"
                                        @keyup.esc="cancelEditing"
                                    >
                                </div>
                                <!-- Ë°®Á§∫„É¢„Éº„Éâ -->
                                <span v-else class="text-gray-800 font-medium">{{ cs.name }}</span>
                            </div>
                            <div class="flex gap-2">
                                <template v-if="editingItem && editingItem.id === cs.id">
                                    <button
                                        @click="saveEditing"
                                        class="px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600"
                                    >
                                        ‰øùÂ≠ò
                                    </button>
                                    <button
                                        @click="cancelEditing"
                                        class="px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400"
                                    >
                                        „Ç≠„É£„É≥„Çª„É´
                                    </button>
                                </template>
                                <template v-else>
                                    <button
                                        @click="startEditing(cs)"
                                        class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded hover:bg-gray-200"
                                        title="Á∑®ÈõÜ"
                                    >
                                        ‚úèÔ∏è
                                    </button>
                                    <button
                                        @click="deleteCheckStatus(cs.id)"
                                        class="px-3 py-1 bg-red-100 text-red-600 text-sm rounded hover:bg-red-200"
                                        title="ÂâäÈô§"
                                    >
                                        üóëÔ∏è
                                    </button>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Êñ∞Ë¶èËøΩÂä† -->
                    <div class="p-6 border-t bg-gray-50">
                        <div class="flex gap-2">
                            <input
                                v-model="newItemName"
                                type="text"
                                placeholder="Êñ∞„Åó„ÅÑ„ÉÅ„Çß„ÉÉ„ÇØÈÄ≤Êçó„ÅÆÂêçÂâç"
                                class="flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"
                                @keyup.enter="addCheckStatus"
                            >
                            <button
                                @click="addCheckStatus"
                                :disabled="!newItemName.trim()"
                                class="px-4 py-2 bg-teal-500 text-white rounded-lg text-sm hover:bg-teal-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                            >
                                Ôºã ËøΩÂä†
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- „Éà„Éº„Çπ„ÉàÈÄöÁü• -->
        <div class="fixed bottom-4 right-4 space-y-2 z-50">
            <div
                v-for="toast in toasts"
                :key="toast.id"
                :class="[
                    'px-4 py-3 rounded-lg shadow-lg fade-in',
                    toast.type === 'success' ? 'bg-green-500 text-white' :
                    toast.type === 'error' ? 'bg-red-500 text-white' :
                    'bg-blue-500 text-white'
                ]"
            >
                {{ toast.message }}
            </div>
        </div>
    </div>

    <!-- SortableJS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.6/Sortable.min.js"></script>

    <!-- Vue.js 3 (CDN) -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

    <!-- „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Çπ„ÇØ„É™„Éó„Éà -->
    <script src="/js/api.js"></script>
    <script src="/js/websocket.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>
